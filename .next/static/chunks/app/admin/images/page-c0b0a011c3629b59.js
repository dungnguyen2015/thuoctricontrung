(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[267],{7169:function(e,t,a){Promise.resolve().then(a.bind(a,7254))},7254:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return n}});var s=a(7437),l=a(2265);function n(){let[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(null),[r,i]=(0,l.useState)(!1),[c,d]=(0,l.useState)(""),[o,h]=(0,l.useState)(1),[u,m]=(0,l.useState)({total:0,limit:20,totalPages:1}),p=async()=>{let e=await fetch("/api/images/list?page=".concat(o,"&limit=").concat(u.limit)),a=await e.json();t(a.images),m(a.pagination)};(0,l.useEffect)(()=>{p()},[o]);let x=async()=>{if(!a)return;let e=new FormData;e.append("file",a),e.append("alt",c),i(!0);let t=await fetch("/api/images/upload",{method:"POST",body:e});await t.json(),i(!1),n(null),d(""),p()},b=async e=>{await fetch("/api/images/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:e})}),p()};return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Quản l\xfd h\xecnh ảnh"}),(0,s.jsx)("input",{type:"file",onChange:e=>{var t;return n((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),(0,s.jsx)("input",{type:"text",placeholder:"Alt",value:c,onChange:e=>d(e.target.value),className:"w-full mt-4 border p-2 rounded",required:!0}),(0,s.jsx)("button",{onClick:x,disabled:r||!a,className:"mt-4 ml-2 bg-blue-600 text-white px-4 py-1 rounded",children:r?"Đang tải...":"Tải l\xean"})]}),(0,s.jsxs)("table",{className:"w-full table-auto border",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100 text-left",children:[(0,s.jsx)("th",{className:"p-2 border",children:"#"}),(0,s.jsx)("th",{className:"p-2 border",children:"Alt"}),(0,s.jsx)("th",{className:"p-2 border",children:"Ảnh"}),(0,s.jsx)("th",{className:"p-2 border",children:"Slug"}),(0,s.jsx)("th",{className:"p-2 border",children:"H\xe0nh động"})]})}),(0,s.jsx)("tbody",{children:e&&e.map((e,t)=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"p-2 border",children:t+1}),(0,s.jsx)("td",{className:"p-2 border",children:e.alt}),(0,s.jsx)("td",{className:"p-2 border",children:e.slug&&(0,s.jsx)("img",{src:"".concat(e.slug),width:"100px",className:"h-16 object-cover"})}),(0,s.jsx)("td",{className:"p-2 border",children:"".concat(e.slug)}),(0,s.jsx)("td",{className:"p-2 border",children:(0,s.jsx)("button",{onClick:()=>b(e.slug),className:"bg-red-500 text-white py-1 px-3 rounded",children:"X\xf3a"})})]},e.id))})]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-4 text-right",children:[(0,s.jsx)("button",{className:"text-blue-600",onClick:()=>h(e=>Math.max(1,e-1)),disabled:o<=1,children:"Trang trước"}),(0,s.jsxs)("span",{children:["Trang ",o," / ",u.totalPages]}),(0,s.jsx)("button",{className:"text-blue-600",onClick:()=>h(e=>Math.min(u.totalPages,e+1)),disabled:o>=u.totalPages,children:"Trang sau"})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7169)}),_N_E=e.O()}]);