(()=>{var e={};e.id=722,e.ids=[722],e.modules={62849:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=62849,e.exports=t},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},98216:e=>{"use strict";e.exports=require("net")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},95346:e=>{"use strict";e.exports=require("timers")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},70481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>d,originalPathname:()=>l,pages:()=>u,routeModule:()=>m,tree:()=>p}),r(37916),r(73833),r(35866);var i=r(23191),s=r(88716),c=r(37922),n=r.n(c),a=r(95231),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);r.d(t,o);let p=["",{children:["danh-muc",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,37916)),"D:\\VPS-Dung\\thuoctricontrung\\app\\danh-muc\\[slug]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,73833)),"D:\\VPS-Dung\\thuoctricontrung\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],u=["D:\\VPS-Dung\\thuoctricontrung\\app\\danh-muc\\[slug]\\page.tsx"],l="/danh-muc/[slug]/page",d={require:r,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/danh-muc/[slug]/page",pathname:"/danh-muc/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:p}})},17389:(e,t,r)=>{Promise.resolve().then(r.bind(r,22776)),Promise.resolve().then(r.t.bind(r,92481,23)),Promise.resolve().then(r.t.bind(r,79404,23))},37916:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,generateMetadata:()=>u,revalidate:()=>p});var i=r(19510),s=r(17710),c=r(58360),n=r(66138),a=r(59206),o=r(57371);let p=7200;async function u({params:e}){let{slug:t}=await e,r=await (0,a.mb)(t);if(!r)return{title:"Kh\xf4ng t\xecm thấy sản phẩm",description:"Sản phẩm kh\xf4ng tồn tại"};let i="https://thuoccontrung.com",s={"@context":"https://schema.org","@type":"ItemList",name:"Danh s\xe1ch sản phẩm",itemListOrder:"https://schema.org/ItemListOrderAscending",numberOfItems:r.length,itemListElement:r.map((e,t)=>({"@type":"ListItem",position:t+1,url:`${i}/san-pham/${e.slug}`}))},c=r.map(e=>({"@context":"https://schema.org","@type":"Product",name:e.name,image:[`${i}${e.image_url}`],description:e.description,url:`${i}/san-pham/${e.slug}`,offers:{"@type":"Offer",priceCurrency:"VND",price:Number(e.discount_price)>0?e.discount_price:e.price,availability:"https://schema.org/InStock",itemCondition:"https://schema.org/NewCondition"}}));return{title:`${r[0].category_name}`,description:`Tổng hợp c\xe1c sản phẩm ${r[0].category_name} hiệu quả cao, an to\xe0n cho gia đ\xecnh.`,other:{"application/ld+json":JSON.stringify([s,...c])}}}async function l({params:e}){let{slug:t}=await e,r=await (0,a.mb)(t);return r?(0,i.jsxs)("main",{className:"min-h-screen bg-white text-gray-800",children:[i.jsx(c.Z,{}),(0,i.jsxs)("section",{className:"py-12 px-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-center mb-10",children:r[0].category_name}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 max-w-6xl mx-auto",children:r.map((e,t)=>(0,i.jsxs)("div",{className:"border rounded-xl overflow-hidden shadow hover:shadow-lg transition bg-white",children:[i.jsx("div",{className:"relative h-52 w-full",children:i.jsx(o.default,{href:`/san-pham/${e.slug}`,children:i.jsx(s.default,{src:e.image_url,alt:e.name,fill:!0,className:"object-cover"})})}),(0,i.jsxs)("div",{className:"p-4",children:[i.jsx(o.default,{href:`/san-pham/${e.slug}`,children:i.jsx("h2",{className:"text-lg font-bold mb-1",children:e.name})}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,i.jsxs)("span",{className:"text-green-800 font-semibold",children:[(e.discount_price>0?e.discount_price:e.price).toLocaleString("vi-VN"),"₫"]})]})]},t))})]}),i.jsx(n.Z,{})]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx(c.Z,{}),(0,i.jsxs)("main",{children:[" ",i.jsx("div",{className:"p-10 py-10 h1 text-center",children:"B\xe0i viết kh\xf4ng tồn tại."})]}),i.jsx(n.Z,{})]})}},94282:(e,t,r)=>{"use strict";function i({src:e,width:t,quality:r}){let i=new URLSearchParams({w:t.toString(),q:(r||75).toString(),format:"webp",optimize:"high"});return`http://localhost:3000/${e}?${i}`}r.r(t),r.d(t,{default:()=>i})},46643:(e,t,r)=>{"use strict";r.d(t,{w:()=>c});var i=r(9487);let s=new Map,c=async(e,t,r,c=3e5)=>{if(s.has(e))return s.get(e);let n=await (0,i.I)(t,r);return s.set(e,n),n}},9487:(e,t,r)=>{"use strict";r.d(t,{I:()=>s,db:()=>i});let i=r(69518).createPool({host:process.env.DB_HOST||"localhost",user:process.env.DB_USER||"root",password:process.env.DB_PASS||"",database:process.env.DB_NAME||"trungdienlanh",waitForConnections:!0,connectionLimit:20,queueLimit:100,enableKeepAlive:!0,keepAliveInitialDelay:3e4});async function s(e,t){{let[r]=await i.execute(e,t);return r}}},59206:(e,t,r)=>{"use strict";r.d(t,{Co:()=>o,Lu:()=>u,Xp:()=>p,mb:()=>a});var i=r(9487),s=r(46643),c=r(57708);let n="products";async function a(e){try{let t=await (0,s.w)(`products_${e}`,`SELECT p.*, MIN(c.name) AS category_name, MIN(img.image_url) AS image_url, MIN(pc.discount_price) AS discount_price, MIN(pc.price) AS price FROM products p JOIN category_product cp ON 
      p.id = cp.product_id JOIN categories c ON c.id = cp.category_id JOIN product_images img ON p.id = img.product_id
      JOIN product_capacities pc ON p.id = pc.product_id WHERE p.status = 'active' AND img.is_primary = 1 AND c.slug = ? GROUP BY p.id;`,[e],0);return t.length>0?t:null}catch(e){return console.error("Lỗi truy vấn sản phẩm",e),null}}async function o(e){try{let t=await (0,s.w)(`product_${e}`,`SELECT id, name, slug, ingredients, description, content FROM ${n} WHERE slug = ? LIMIT 1`,[e],0);if(0===t.length)return null;let r=t[0],i=await (0,s.w)(`image_${e}`,"SELECT image_url, is_primary FROM product_images WHERE product_id = ?",[r.id],0),c=await (0,s.w)(`capacity_${e}`,"SELECT capacity, price, discount_price, in_stock FROM product_capacities WHERE product_id = ?",[r.id],0);return{id:r.id,name:r.name,slug:r.slug,content:r.content,ingredients:JSON.parse(r.ingredients||"[]"),description:r.description,image_url_first:i[0].image_url,capacity_first:c[0].capacity,price_first:c[0].price,discount_price_first:c[0].discount_price??c[0].price,images:i.map(e=>e.image_url),capacities:c.reduce((e,t)=>(e[t.capacity]={original:t.price,sale:t.discount_price??t.price,in_stock:!!t.in_stock},e),{})}}catch(e){return console.error("Lỗi truy vấn danh mục",e),null}}async function p(e,t=6){let r=(e-1)*t,s=`SELECT p.*, MIN(c.name) AS category_name, MIN(img.image_url) AS image_url, MIN(pc.discount_price) AS discount_price, MIN(pc.price) AS price FROM products p JOIN category_product cp ON 
      p.id = cp.product_id JOIN categories c ON c.id = cp.category_id JOIN product_images img ON p.id = img.product_id
      JOIN product_capacities pc ON p.id = pc.product_id WHERE p.status = 'active' AND img.is_primary = 1 GROUP BY p.id LIMIT ${t} OFFSET ${r}`;if(isNaN(t)||isNaN(r))throw Error("limit hoặc offset kh\xf4ng hợp lệ");return await (0,i.I)(s)}let u=(0,c.unstable_cache)(async()=>{try{let e=await (0,i.I)(`
        SELECT COUNT(id) as total 
        FROM ${n}
        WHERE status = 'active'
      `);return e[0]?.total||0}catch(e){return console.error("Failed to fetch article count:",e),0}},["total-products"],{tags:["products"],revalidate:3600})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[8948,5827,1131,6864,7708,7710,1500],()=>r(70481));module.exports=i})();