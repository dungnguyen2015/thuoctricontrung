(()=>{var e={};e.id=722,e.ids=[722],e.modules={62849:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=62849,e.exports=t},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},98216:e=>{"use strict";e.exports=require("net")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},95346:e=>{"use strict";e.exports=require("timers")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},70481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>l,routeModule:()=>m,tree:()=>u}),r(37916),r(73833),r(35866);var i=r(23191),s=r(88716),n=r(37922),a=r.n(n),c=r(95231),o={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>c[e]);r.d(t,o);let u=["",{children:["danh-muc",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,37916)),"D:\\VPS-Dung\\thuoctricontrung\\app\\danh-muc\\[slug]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,73833)),"D:\\VPS-Dung\\thuoctricontrung\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],l=["D:\\VPS-Dung\\thuoctricontrung\\app\\danh-muc\\[slug]\\page.tsx"],d="/danh-muc/[slug]/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/danh-muc/[slug]/page",pathname:"/danh-muc/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},17389:(e,t,r)=>{Promise.resolve().then(r.bind(r,22776)),Promise.resolve().then(r.t.bind(r,92481,23)),Promise.resolve().then(r.t.bind(r,79404,23))},37916:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,generateMetadata:()=>d,revalidate:()=>l});var i=r(19510),s=r(17710),n=r(58360),a=r(66138),c=r(59206),o=r(35218),u=r(57371);let l=7200;async function d({params:e}){let{slug:t}=await e,r=await (0,o.f)(t);return r?{title:r.name,description:r.name}:{title:"Kh\xf4ng t\xecm thấy sản phẩm",description:"Sản phẩm kh\xf4ng tồn tại"}}async function p({params:e}){let{slug:t}=await e,r=await (0,c.m)(t);return r?(0,i.jsxs)("main",{className:"min-h-screen bg-white text-gray-800",children:[i.jsx(n.Z,{}),(0,i.jsxs)("section",{className:"py-12 px-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-center mb-10",children:"Thuốc diệt kiến"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 max-w-6xl mx-auto",children:r.map((e,t)=>(0,i.jsxs)("div",{className:"border rounded-xl overflow-hidden shadow hover:shadow-lg transition bg-white",children:[i.jsx("div",{className:"relative h-52 w-full",children:i.jsx(u.default,{href:`/san-pham/${e.slug}`,children:i.jsx(s.default,{src:e.image_url,alt:e.name,fill:!0,className:"object-cover"})})}),(0,i.jsxs)("div",{className:"p-4",children:[i.jsx(u.default,{href:`/san-pham/${e.slug}`,children:i.jsx("h2",{className:"text-lg font-bold mb-1",children:e.name})}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,i.jsxs)("span",{className:"text-green-600 font-semibold",children:[(e.discount_price>0?e.discount_price:e.price).toLocaleString("vi-VN"),"₫"]})]})]},t))})]}),i.jsx(a.Z,{})]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx(n.Z,{}),(0,i.jsxs)("main",{children:[" ",i.jsx("div",{className:"p-10 py-10 h1 text-center",children:"B\xe0i viết kh\xf4ng tồn tại."})]}),i.jsx(a.Z,{})]})}},94282:(e,t,r)=>{"use strict";function i({src:e,width:t,quality:r}){let i=new URLSearchParams({w:t.toString(),q:(r||75).toString(),format:"webp",optimize:"high"});return`https://thuoctricontrung.com/${e}?${i}`}r.r(t),r.d(t,{default:()=>i})},46643:(e,t,r)=>{"use strict";r.d(t,{w:()=>n});var i=r(9487);let s=new Map,n=async(e,t,r,n=3e5)=>{if(s.has(e))return s.get(e);let a=await (0,i.I)(t,r);return s.set(e,a),a}},35218:(e,t,r)=>{"use strict";r.d(t,{f:()=>n,n:()=>a});var i=r(46643);let s="categories";async function n(e){try{let t=await (0,i.w)(`category_${e}`,`SELECT * FROM ${s} WHERE slug = ?`,[e],0);return t.length>0?t[0]:null}catch(e){return console.error("Lỗi truy vấn danh mục",e),null}}async function a(){try{let e=await (0,i.w)("category",`SELECT * FROM ${s}`,[],0);return e.length>0?e:null}catch(e){return console.error("Lỗi truy vấn danh mục",e),null}}},9487:(e,t,r)=>{"use strict";r.d(t,{I:()=>s,db:()=>i});let i=r(69518).createPool({host:process.env.DB_HOST||"localhost",user:process.env.DB_USER||"root",password:process.env.DB_PASS||"",database:process.env.DB_NAME||"trungdienlanh",waitForConnections:!0,connectionLimit:20,queueLimit:100,enableKeepAlive:!0,keepAliveInitialDelay:3e4});async function s(e,t){{let[r]=await i.execute(e,t);return r}}},59206:(e,t,r)=>{"use strict";r.d(t,{C:()=>n,m:()=>s});var i=r(46643);async function s(e){try{let t=await (0,i.w)(`products_${e}`,`SELECT p.*, MAX(img.image_url) AS image_url, MAX(pc.discount_price) AS discount_price, MAX(pc.price) AS price FROM products p JOIN category_product cp ON 
      p.id = cp.product_id JOIN categories c ON c.id = cp.category_id JOIN product_images img ON p.id = img.product_id
      JOIN product_capacities pc ON p.id = pc.product_id WHERE p.status = 'active' AND img.is_primary = 1 AND c.slug = ? GROUP BY p.id;`,[e],0);return t.length>0?t:null}catch(e){return console.error("Lỗi truy vấn sản phẩm",e),null}}async function n(e){try{let t=await (0,i.w)(`product_${e}`,"SELECT id, name, slug, ingredients, description, content FROM products WHERE slug = ? LIMIT 1",[e],0);if(0===t.length)return null;let r=t[0],s=await (0,i.w)(`image_${e}`,"SELECT image_url, is_primary FROM product_images WHERE product_id = ?",[r.id],0),n=await (0,i.w)(`capacity_${e}`,"SELECT capacity, price, discount_price, in_stock FROM product_capacities WHERE product_id = ?",[r.id],0);return{id:r.id,name:r.name,slug:r.slug,content:r.content,ingredients:JSON.parse(r.ingredients||"[]"),description:r.description,image_url_first:s[0].image_url,capacity_first:n[0].capacity,price_first:n[0].price,discount_price_first:n[0].discount_price??n[0].price,images:s.map(e=>e.image_url),capacities:n.reduce((e,t)=>(e[t.capacity]={original:t.price,sale:t.discount_price??t.price,in_stock:!!t.in_stock},e),{})}}catch(e){return console.error("Lỗi truy vấn danh mục",e),null}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[948,827,131,864,710,500],()=>r(70481));module.exports=i})();